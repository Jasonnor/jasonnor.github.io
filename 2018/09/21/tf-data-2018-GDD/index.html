<!DOCTYPE html><html class="theme-next gemini use-motion" lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="wOgmZFotz8seZFWZPvZljp5AWrR2vpoup-3LBX8OVlk"><meta name="msvalidate.01" content="3BDCFECA73036E90C8F629F8CC7075D7"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=6.4.1" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png?v=6.4.1"><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png?v=6.4.1"><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png?v=6.4.1"><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg?v=6.4.1" color="#222"><link rel="manifest" href="/favicon/site.webmanifest"><meta name="msapplication-config" content="/favicon/browserconfig.xml"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"6.4.1",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1,description:"關注互聯網和技術"},fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="本篇文章受掘金邀請撰寫，更多GCC 2018演講介紹歡迎前往：2018 Google 開發者大會 掘金專題GDD 2018 第二天的 9 月 21 日 ，陳爽（Google Brain 軟體工程師）為我們帶來了《以 tf.data 優化訓練數據》，講解如何使用 tf.data 為各類模型打造高性能的 TensorFlow 輸入渠道，本文將摘錄演講技術干貨。"><meta name="keywords" content="Machine learning,Python,TensorFlow"><meta property="og:type" content="article"><meta property="og:title" content="以 tf.data 優化訓練資料輸入管道 丨 2018 Google 開發者大會"><meta property="og:url" content="http://jasonnor.github.io/2018/09/21/tf-data-2018-GDD/index.html"><meta property="og:site_name" content="The Jasonnor Matrix"><meta property="og:description" content="本篇文章受掘金邀請撰寫，更多GCC 2018演講介紹歡迎前往：2018 Google 開發者大會 掘金專題GDD 2018 第二天的 9 月 21 日 ，陳爽（Google Brain 軟體工程師）為我們帶來了《以 tf.data 優化訓練數據》，講解如何使用 tf.data 為各類模型打造高性能的 TensorFlow 輸入渠道，本文將摘錄演講技術干貨。"><meta property="og:locale" content="en"><meta property="og:image" content="https://i.imgur.com/nBLUAAs.png"><meta property="og:image" content="https://i.imgur.com/nBLUAAs.png"><meta property="og:image" content="https://i.imgur.com/ugbv7zC.png"><meta property="og:image" content="https://i.imgur.com/xVuatj7.png"><meta property="og:image" content="https://i.imgur.com/GIq5KCE.png"><meta property="og:image" content="https://i.imgur.com/MUtSvAA.png"><meta property="og:image" content="https://i.imgur.com/5iTCJQu.png"><meta property="og:image" content="https://i.imgur.com/lQpPU4m.png"><meta property="og:image" content="https://i.imgur.com/kpSFS08.png"><meta property="og:updated_time" content="2018-09-21T14:48:01.506Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="以 tf.data 優化訓練資料輸入管道 丨 2018 Google 開發者大會"><meta name="twitter:description" content="本篇文章受掘金邀請撰寫，更多GCC 2018演講介紹歡迎前往：2018 Google 開發者大會 掘金專題GDD 2018 第二天的 9 月 21 日 ，陳爽（Google Brain 軟體工程師）為我們帶來了《以 tf.data 優化訓練數據》，講解如何使用 tf.data 為各類模型打造高性能的 TensorFlow 輸入渠道，本文將摘錄演講技術干貨。"><meta name="twitter:image" content="https://i.imgur.com/nBLUAAs.png"><link rel="alternate" href="/atom.xml" title="The Jasonnor Matrix" type="application/atom+xml"><link rel="canonical" href="http://jasonnor.github.io/2018/09/21/tf-data-2018-GDD/"><script type="text/javascript" id="page.configurations">CONFIG.page={sidebar:""}</script><title>以 tf.data 優化訓練資料輸入管道 丨 2018 Google 開發者大會 | The Jasonnor Matrix</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-49550932-3"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-49550932-3")</script><noscript><style type="text/css">.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="en"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">The Jasonnor Matrix</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一個孤獨漫步者的喃喃自語</h1></div><div class="site-nav-toggle"><button aria-label="Toggle navigation bar"><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archives</a></li></ul></nav></div></header><a href="https://github.com/Jasonnor" class="github-corner" target="_blank" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#222;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://jasonnor.github.io/2018/09/21/tf-data-2018-GDD/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Jasonnor"><meta itemprop="description" content="關注互聯網、技術、電腦科學和應用，分享個人項目與淺見。作者吳丞鎬（Jasonnor），研究領域為電腦視覺和深度學習，對技術和學術研究充滿熱忱。"><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="The Jasonnor Matrix"><span hidden itemprop="logo" itemscope itemtype="https://schema.org/ImageObject"><img src="https://jasonnor.github.io/favicon/android-chrome-512x512.png"><meta itemprop="url" content="https://jasonnor.github.io/favicon/android-chrome-512x512.png"><meta itemprop="width" content="60"><meta itemprop="height" content="60"></span></span><header class="post-header"><h2 class="post-title" itemprop="name headline">以 tf.data 優化訓練資料輸入管道 丨 2018 Google 開發者大會</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2018-09-21 19:30:00 / Modified: 22:48:01" itemprop="dateCreated datePublished" datetime="2018-09-21T19:30:00+08:00">2018-09-21</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/機器學習/" itemprop="url" rel="index"><span itemprop="name">機器學習</span></a></span> </span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/2018/09/21/tf-data-2018-GDD/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/09/21/tf-data-2018-GDD/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="https://i.imgur.com/nBLUAAs.png" alt="preview"></p><blockquote><p>本篇文章受<a href="https://juejin.im/post/5ba4b2a7f265da0ab719aa7e" target="_blank" rel="noopener">掘金邀請撰寫</a>，更多GCC 2018演講介紹歡迎前往：<a href="https://juejin.im/e/gdd" target="_blank" rel="noopener">2018 Google 開發者大會 掘金專題</a></p></blockquote><p>GDD 2018 第二天的 9 月 21 日 ，陳爽（Google Brain 軟體工程師）為我們帶來了《以 tf.data 優化訓練數據》，講解如何使用 tf.data 為各類模型打造高性能的 TensorFlow 輸入渠道，本文將摘錄演講技術干貨。</p><a id="more"></a><p><span hidden itemprop="image" itemscope itemtype="https://schema.org/ImageObject"><br><img src="https://i.imgur.com/nBLUAAs.png"><br><meta itemprop="url" content="https://i.imgur.com/nBLUAAs.png"><br><meta itemprop="width" content="60"><br><meta itemprop="height" content="60"><br></span></p><h2 id="資料輸入管道"><a href="#資料輸入管道" class="headerlink" title="資料輸入管道"></a>資料輸入管道</h2><ul><li>大多人將時間和金錢花在神經網路架構上，資料輸入容易被忽略</li><li>沒有好的資料輸入管道，GPU 再強速度也不會顯著提高</li><li>目標：高效、靈活、易用</li></ul><h2 id="ETL-系統"><a href="#ETL-系統" class="headerlink" title="ETL 系統"></a>ETL 系統</h2><p><img src="https://i.imgur.com/ugbv7zC.png" alt=""></p><ol><li>提取資料（Extract）：將訓練資料從存取器（硬碟、雲端等）提取</li><li>轉換資料（Transform）：將資料轉換為模型可讀取的資料，同時進行數據清洗等預處理</li><li>裝載資料（Load）：將處理好的資料裝載至加速器</li></ol><h2 id="tf-data：為機器學習設計的資料輸入系統"><a href="#tf-data：為機器學習設計的資料輸入系統" class="headerlink" title="tf.data：為機器學習設計的資料輸入系統"></a>tf.data：為機器學習設計的資料輸入系統</h2><p><img src="https://i.imgur.com/xVuatj7.png" alt=""></p><p>圖中程式分別對應 ETL 系統的三個步驟，使用 tf.data 即可輕鬆實現。</p><h2 id="tf-data-優化手段：以上圖程式為例"><a href="#tf-data-優化手段：以上圖程式為例" class="headerlink" title="tf.data 優化手段：以上圖程式為例"></a>tf.data 優化手段：以上圖程式為例</h2><ol><li>多線程處理（使用 <strong>num_parallel_reads</strong>）</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">files = tf.data.Dataset.list_files(<span class="string">"training-*-of-1024.tfrecord"</span>)</span><br><span class="line">dataset = tf.data.TFRecordDataset(files, num_parallel_reads=<span class="number">32</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li>合併轉換步驟（如 <strong>shuffle_and_repaeat</strong>, <strong>map_and_batch</strong>）</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dataset = dataset.apply(tf.contrib.data.shuffle_and_repaeat(<span class="number">10000</span>, NUM_EPOCHS))</span><br><span class="line">dataset = dataset.apply(tf.contrib.data.map_and_batch(<span class="keyword">lambda</span> x: ..., BATCH_SIZE))</span><br></pre></td></tr></table></figure><ol start="3"><li>流水線化（使用 <strong>prefetch_to_device</strong>）</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dataset = dataset.apply(tf.contrib.data.prefetch_to_device(<span class="string">"/gpu:0"</span>))</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/GIq5KCE.png" alt=""></p><p>最終程式如下圖所示，更多優化手段可以參考 <a href="https://www.tensorflow.org/performance/datasets_performance" target="_blank" rel="noopener">tf.data 性能指南</a>：</p><p><img src="https://i.imgur.com/MUtSvAA.png" alt=""></p><h2 id="tf-data-的靈活性"><a href="#tf-data-的靈活性" class="headerlink" title="tf.data 的靈活性"></a>tf.data 的靈活性</h2><h3 id="支持函數式編程"><a href="#支持函數式編程" class="headerlink" title="支持函數式編程"></a>支持函數式編程</h3><p><img src="https://i.imgur.com/5iTCJQu.png" alt=""></p><p>如上圖，可以用自定義的 map_fn 處理 TensorFlow 或兼容的函數，同時支持 AutoGraph 處理過的函數。</p><h3 id="支持不同語言與資料類型"><a href="#支持不同語言與資料類型" class="headerlink" title="支持不同語言與資料類型"></a>支持不同語言與資料類型</h3><ul><li>使用 Dataset.form_generator() 支持 Python 程式生成 Dataset</li><li>使用 DatasetOpKernel 和 tf.load_op_library 支持自定義 C++ 資料處理程式</li></ul><p>如下圖，使用 Python 自帶的 urllib 獲取伺服器資料，存入 dataset：</p><p><img src="https://i.imgur.com/lQpPU4m.png" alt=""></p><h3 id="支持多種資料來源"><a href="#支持多種資料來源" class="headerlink" title="支持多種資料來源"></a>支持多種資料來源</h3><p>如普通文件系統、GCP 雲儲存、其他雲儲存、SQL 數據庫等。</p><p>讀取 Google 雲儲存的 TFRecord 文件示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">files = tf.contrib.data.TFRecordDataset(</span><br><span class="line">  <span class="string">"gs://path/to/file.tfrecord"</span>, num_parallel_reads=<span class="number">32</span>)</span><br></pre></td></tr></table></figure><p>使用自訂 SQL 資料庫示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">files = tf.contrib.data.SqlDataset(</span><br><span class="line">  <span class="string">"sqllite"</span>, <span class="string">"/foo/db.sqlite"</span>, <span class="string">"SELECT name, age FROM people"</span>, </span><br><span class="line">  (tf.string, tf.int32))</span><br></pre></td></tr></table></figure><h2 id="tf-data-的易用性"><a href="#tf-data-的易用性" class="headerlink" title="tf.data 的易用性"></a>tf.data 的易用性</h2><h3 id="在-Eager-執行模式下，可以直接使用-Python-for-循環："><a href="#在-Eager-執行模式下，可以直接使用-Python-for-循環：" class="headerlink" title="在 Eager 執行模式下，可以直接使用 Python for 循環："></a>在 Eager 執行模式下，可以直接使用 Python for 循環：</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tf.enable_eager_execution()</span><br><span class="line"><span class="keyword">for</span> batch <span class="keyword">in</span> dataset:</span><br><span class="line">    train_model(batch)</span><br></pre></td></tr></table></figure><h3 id="為-TF-Example-或-CSV-提供現有高效配方"><a href="#為-TF-Example-或-CSV-提供現有高效配方" class="headerlink" title="為 TF Example 或 CSV 提供現有高效配方"></a>為 TF Example 或 CSV 提供現有高效配方</h3><p><img src="https://i.imgur.com/kpSFS08.png" alt=""></p><p>上圖可以簡單替換為一個函數：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dataset = tf.contrib.data.make_batched_features_dataset(</span><br><span class="line">  <span class="string">"training-*-of-1024.tfrecord"</span>,</span><br><span class="line">  BATCH_SIZE, features, num_epochs=NUM_EPOCHS)</span><br></pre></td></tr></table></figure><p>使用 CSV 資料集的情境：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dataset = tf.contrib.data.make_csv_dataset(</span><br><span class="line">  <span class="string">"*.csv"</span>, BATCH_SIZE, num_epochs=NUM_EPOCHS)</span><br></pre></td></tr></table></figure><h3 id="使用-AUTOTUNE-自動調節管道"><a href="#使用-AUTOTUNE-自動調節管道" class="headerlink" title="使用 AUTOTUNE 自動調節管道"></a>使用 AUTOTUNE 自動調節管道</h3><p>可以簡單的使用 AUTOTUNE 找到 prefetching 的最佳參數：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dataset = dataset.prefetch(tf.contrib.data.AUTOTUNE)</span><br></pre></td></tr></table></figure><h3 id="支持-Keras-和-Estimators-相互兼容"><a href="#支持-Keras-和-Estimators-相互兼容" class="headerlink" title="支持 Keras 和 Estimators 相互兼容"></a>支持 Keras 和 Estimators 相互兼容</h3><p>對於 Keras，可以將 dataset 直接傳遞使用；對於 Estimators 訓練函數，將 dataset 包裝至輸入函數並返回即可，如下示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">input_fn</span><span class="params">()</span>:</span></span><br><span class="line">    dataset = tf.contrib.data.make_csv_dataset(</span><br><span class="line">      <span class="string">"*.csv"</span>, BATCH_SIZE, num_epochs=NUM_EPOCHS)</span><br><span class="line">    <span class="keyword">return</span> dataset</span><br><span class="line"></span><br><span class="line">tf.estimator.Estimator(model_fn=train_model).train(input_fn=input_fn)</span><br></pre></td></tr></table></figure><h2 id="實際運用經驗"><a href="#實際運用經驗" class="headerlink" title="實際運用經驗"></a>實際運用經驗</h2><ul><li>原始 tf.data 資料輸入程式： ~150 圖像 / 秒</li><li>管道化的 tf.data 資料輸入程式： ~1,750 圖像 / 秒 =&gt; <strong>12倍的性能！</strong></li><li>Cloud TPU 上使用 tf.data： ~4,100 圖像 / 秒</li><li>Cloud TPU Pod 上使用 tf.data： ~219,000 圖像 / 秒</li></ul><h2 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h2><p>本場演講介紹了 tf.data 這個兼具高效、靈活與易用的 API，同時了解如何運用管道化及其他優化手段來增進運算效能，以及許多可能未曾發現的實用函數。</p><h2 id="資源"><a href="#資源" class="headerlink" title="資源"></a>資源</h2><ul><li>入門指南<ul><li><a href="https://www.tensorflow.org/guide/datasets" target="_blank" rel="noopener">www.tensorflow.org/guide/datasets</a></li><li><a href="https://www.tensorflow.org/performance/datasets_performance" target="_blank" rel="noopener">www.tensorflow.org/performance/datasets_performance</a></li></ul></li><li>示例程式<ul><li><a href="https://github.com/tensorflow/benchmarks" target="_blank" rel="noopener">github.com/tensorflow/benchmarks</a></li><li><a href="https://github.com/tensorflow/models" target="_blank" rel="noopener">github.com/tensorflow/models</a></li><li><a href="https://github.com/tensorflow/tpu" target="_blank" rel="noopener">github.com/tensorflow/tpu</a></li></ul></li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Machine-learning/" rel="tag"># Machine learning</a> <a href="/tags/Python/" rel="tag"># Python</a> <a href="/tags/TensorFlow/" rel="tag"># TensorFlow</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2018/09/17/tf-idf-python/" rel="next" title="基於 Python 的 tf-idf 文字探勘演算法實現：以《笑傲江湖》為例子"><i class="fa fa-chevron-left"></i> 基於 Python 的 tf-idf 文字探勘演算法實現：以《笑傲江湖》為例子</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2018/11/03/AI-ML-DL-CV-Interview-Experience/" rel="prev" title="AI/ML/DL/CV 相關面試心得（長文）">AI/ML/DL/CV 相關面試心得（長文） <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div><div class="comments" id="comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">Table of Contents</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">Overview</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Jasonnor"><p class="site-author-name" itemprop="name"><a href="/about">Jasonnor</a></p><p class="site-description motion-element" itemprop="description">關注互聯網和技術</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">6</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">3</span> <span class="site-state-item-name">categories</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">13</span> <span class="site-state-item-name">tags</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/Jasonnor" target="_blank" title="GitHub" rel="external nofollow"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="https://www.linkedin.com/in/jasonnor/" target="_blank" title="Linkedin" rel="external nofollow"><i class="fa fa-fw fa-linkedin"></i>Linkedin</a> </span><span class="links-of-author-item"><a href="mailto:wujason810@gmail.com" target="_blank" title="E-Mail" rel="external nofollow"><i class="fa fa-fw fa-envelope"></i>E-Mail</a></span></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#資料輸入管道"><span class="nav-number">1.</span> <span class="nav-text">資料輸入管道</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ETL-系統"><span class="nav-number">2.</span> <span class="nav-text">ETL 系統</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tf-data：為機器學習設計的資料輸入系統"><span class="nav-number">3.</span> <span class="nav-text">tf.data：為機器學習設計的資料輸入系統</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tf-data-優化手段：以上圖程式為例"><span class="nav-number">4.</span> <span class="nav-text">tf.data 優化手段：以上圖程式為例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tf-data-的靈活性"><span class="nav-number">5.</span> <span class="nav-text">tf.data 的靈活性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#支持函數式編程"><span class="nav-number">5.1.</span> <span class="nav-text">支持函數式編程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#支持不同語言與資料類型"><span class="nav-number">5.2.</span> <span class="nav-text">支持不同語言與資料類型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#支持多種資料來源"><span class="nav-number">5.3.</span> <span class="nav-text">支持多種資料來源</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tf-data-的易用性"><span class="nav-number">6.</span> <span class="nav-text">tf.data 的易用性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#在-Eager-執行模式下，可以直接使用-Python-for-循環："><span class="nav-number">6.1.</span> <span class="nav-text">在 Eager 執行模式下，可以直接使用 Python for 循環：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#為-TF-Example-或-CSV-提供現有高效配方"><span class="nav-number">6.2.</span> <span class="nav-text">為 TF Example 或 CSV 提供現有高效配方</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用-AUTOTUNE-自動調節管道"><span class="nav-number">6.3.</span> <span class="nav-text">使用 AUTOTUNE 自動調節管道</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#支持-Keras-和-Estimators-相互兼容"><span class="nav-number">6.4.</span> <span class="nav-text">支持 Keras 和 Estimators 相互兼容</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#實際運用經驗"><span class="nav-number">7.</span> <span class="nav-text">實際運用經驗</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#結論"><span class="nav-number">8.</span> <span class="nav-text">結論</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#資源"><span class="nav-number">9.</span> <span class="nav-text">資源</span></a></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2016 – <span itemprop="copyrightYear">2018</span> <span class="with-love" id="animate"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Jasonnor</span></div><div class="powered-by">Powered by <a class="theme-link" target="_blank" rel="external nofollow" href="https://hexo.io">Hexo</a> v3.7.1</div><span class="post-meta-divider">|</span><div class="theme-info">Theme – <a class="theme-link" target="_blank" rel="external nofollow" href="https://theme-next.org">NexT.Gemini</a> v6.4.1</div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/js/src/utils.js?v=6.4.1"></script><script type="text/javascript" src="/js/src/motion.js?v=6.4.1"></script><script type="text/javascript" src="/js/src/affix.js?v=6.4.1"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.4.1"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.1"></script><script type="text/javascript" src="/js/src/post-details.js?v=6.4.1"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.1"></script><script id="dsq-count-scr" src="https://jasonnor.disqus.com/count.js" async></script><script type="text/javascript">var disqus_config=function(){this.page.url="http://jasonnor.github.io/2018/09/21/tf-data-2018-GDD/",this.page.identifier="2018/09/21/tf-data-2018-GDD/",this.page.title="以 tf.data 優化訓練資料輸入管道 丨 2018 Google 開發者大會"};function loadComments(){var t=document,e=t.createElement("script");e.src="https://jasonnor.disqus.com/embed.js",e.setAttribute("data-timestamp",""+ +new Date),(t.head||t.body).appendChild(e)}loadComments()</script></body></html>